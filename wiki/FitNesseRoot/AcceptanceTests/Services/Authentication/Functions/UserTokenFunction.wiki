!note [POST] '''/odm-uaa/api/1/odm-uaa/token/'''

!4 Retrieve TOKEN from USER info

|script   |map fixture                      | $userMap |
|set value|true  |for|rememberMe       |
|set value|${PASSWORD}    |for|password       |
|set value|${APPLICATION_NAME}|for|applicationName|
|set value|$userMap.login  |for|login          |
|$userMapCreated=|copy map                         |


|script                |json http test                                 |
|set value             |Bearer $SECURITY_TOKEN|for header|Authorization|
|set content type      |application/json                               |
|copy values from      |$userMapCreated                                       |
|post values as json to|${HOST}/odm-authentication/api/1/odm-authentication/token/?applicationName=${APPLICATION_NAME}          |

#| script | Perform rest call |
#| set method as | POST |
#| set endpoint as | /odm-authentication/api/1/odm-authentication/token/?applicationName=${APPLICATION_NAME} |
#| $body= | page content | >UserLoginInfoJsonBody | relative to | ${PAGE_PATH}.${PAGE_NAME} |
#| set body as | $body |
#| perform call |
#| check | return code | 200 |
#| ensure | response time is less than | 20000 | ms |
#| ensure | response tag is not empty | token |
#| retrieve | token | from response body and store in | SECURITY_TOKEN |
#| show | response time |
#| show | url |
#| show | context value for | SECURITY_TOKEN |
#| show | message body as Json  |
#| show | response body as Json |
#| show | generate redmine message |

